
#import <Foundation/Foundation.h>

typedef struct {
    Byte significantlyDecideToss;
    Byte *philosopher;
    unsigned int tag;
	int successfully;
	int retDiplomat;
	int byImagination;
} StructOutspokenData;

@interface OutspokenData : NSObject

@end

@implementation OutspokenData

//: content
+ (NSString *)moduleManHelper {
    /* static */ NSString *moduleManHelper = nil;
    if (!moduleManHelper) {
		NSArray<NSNumber *> *origin = @[@170, @166, @167, @189, @172, @167, @189, @86];
		NSData *data = [OutspokenData OutspokenDataToData:origin];
        StructOutspokenData value = (StructOutspokenData){201, (Byte *)data.bytes, 7, 152, 142, 23};
        moduleManHelper = [self StringFromOutspokenData:&value];
    }
    return moduleManHelper;
}

//: Super_Group_Information_Update
+ (NSString *)commonLiteReceiveTimer {
    /* static */ NSString *commonLiteReceiveTimer = nil;
    if (!commonLiteReceiveTimer) {
		NSArray<NSNumber *> *origin = @[@117, @83, @86, @67, @84, @121, @97, @84, @73, @83, @86, @121, @111, @72, @64, @73, @84, @75, @71, @82, @79, @73, @72, @121, @115, @86, @66, @71, @82, @67, @166];
		NSData *data = [OutspokenData OutspokenDataToData:origin];
        StructOutspokenData value = (StructOutspokenData){38, (Byte *)data.bytes, 30, 89, 104, 171};
        commonLiteReceiveTimer = [self StringFromOutspokenData:&value];
    }
    return commonLiteReceiveTimer;
}

//: Video_chat
+ (NSString *)coreIqTideDistributeEvent {
    /* static */ NSString *coreIqTideDistributeEvent = nil;
    if (!coreIqTideDistributeEvent) {
		NSArray<NSNumber *> *origin = @[@16, @47, @34, @35, @41, @25, @37, @46, @39, @50, @252];
		NSData *data = [OutspokenData OutspokenDataToData:origin];
        StructOutspokenData value = (StructOutspokenData){70, (Byte *)data.bytes, 10, 97, 177, 218};
        coreIqTideDistributeEvent = [self StringFromOutspokenData:&value];
    }
    return coreIqTideDistributeEvent;
}

//: Image
+ (NSString *)k_yieldHelper {
    /* static */ NSString *k_yieldHelper = nil;
    if (!k_yieldHelper) {
		NSArray<NSNumber *> *origin = @[@130, @166, @170, @172, @174, @139];
		NSData *data = [OutspokenData OutspokenDataToData:origin];
        StructOutspokenData value = (StructOutspokenData){203, (Byte *)data.bytes, 5, 61, 20, 11};
        k_yieldHelper = [self StringFromOutspokenData:&value];
    }
    return k_yieldHelper;
}

//: Video
+ (NSString *)themeFacilityData {
    /* static */ NSString *themeFacilityData = nil;
    if (!themeFacilityData) {
		NSArray<NSNumber *> *origin = @[@80, @111, @98, @99, @105, @81];
		NSData *data = [OutspokenData OutspokenDataToData:origin];
        StructOutspokenData value = (StructOutspokenData){6, (Byte *)data.bytes, 5, 170, 49, 1};
        themeFacilityData = [self StringFromOutspokenData:&value];
    }
    return themeFacilityData;
}

+ (Byte *)OutspokenDataToByte:(StructOutspokenData *)data {
    for (int i = 0; i < data->tag; i++) {
        data->philosopher[i] ^= data->significantlyDecideToss;
    }
    data->philosopher[data->tag] = 0;
	if (data->tag >= 3) {
		data->successfully = data->philosopher[0];
		data->retDiplomat = data->philosopher[1];
		data->byImagination = data->philosopher[2];
	}
    return data->philosopher;
}

//: Location
+ (NSString *)styleSapValue {
    /* static */ NSString *styleSapValue = nil;
    if (!styleSapValue) {
		NSArray<NSNumber *> *origin = @[@215, @244, @248, @250, @239, @242, @244, @245, @241];
		NSData *data = [OutspokenData OutspokenDataToData:origin];
        StructOutspokenData value = (StructOutspokenData){155, (Byte *)data.bytes, 8, 58, 108, 242};
        styleSapValue = [self StringFromOutspokenData:&value];
    }
    return styleSapValue;
}

//: Group_chat_information_update
+ (NSString *)featureDentSettings {
    /* static */ NSString *featureDentSettings = nil;
    if (!featureDentSettings) {
		NSArray<NSNumber *> *origin = @[@16, @37, @56, @34, @39, @8, @52, @63, @54, @35, @8, @62, @57, @49, @56, @37, @58, @54, @35, @62, @56, @57, @8, @34, @39, @51, @54, @35, @50, @255];
		NSData *data = [OutspokenData OutspokenDataToData:origin];
        StructOutspokenData value = (StructOutspokenData){87, (Byte *)data.bytes, 29, 92, 50, 68};
        featureDentSettings = [self StringFromOutspokenData:&value];
    }
    return featureDentSettings;
}

//: Internet_call
+ (NSString *)styleContemplateOverPage {
    /* static */ NSString *styleContemplateOverPage = nil;
    if (!styleContemplateOverPage) {
		NSArray<NSNumber *> *origin = @[@77, @106, @112, @97, @118, @106, @97, @112, @91, @103, @101, @104, @104, @3];
		NSData *data = [OutspokenData OutspokenDataToData:origin];
        StructOutspokenData value = (StructOutspokenData){4, (Byte *)data.bytes, 13, 149, 170, 148};
        styleContemplateOverPage = [self StringFromOutspokenData:&value];
    }
    return styleContemplateOverPage;
}

//: Group_information_update
+ (NSString *)commonHmData {
    /* static */ NSString *commonHmData = nil;
    if (!commonHmData) {
		NSArray<NSNumber *> *origin = @[@134, @179, @174, @180, @177, @158, @168, @175, @167, @174, @179, @172, @160, @181, @168, @174, @175, @158, @180, @177, @165, @160, @181, @164, @142];
		NSData *data = [OutspokenData OutspokenDataToData:origin];
        StructOutspokenData value = (StructOutspokenData){193, (Byte *)data.bytes, 24, 164, 243, 202};
        commonHmData = [self StringFromOutspokenData:&value];
    }
    return commonHmData;
}

//: teamgonggao_content_
+ (NSString *)screenSurroundEvent {
    /* static */ NSString *screenSurroundEvent = nil;
    if (!screenSurroundEvent) {
		NSArray<NSNumber *> *origin = @[@250, @235, @239, @227, @233, @225, @224, @233, @233, @239, @225, @209, @237, @225, @224, @250, @235, @224, @250, @209, @113];
		NSData *data = [OutspokenData OutspokenDataToData:origin];
        StructOutspokenData value = (StructOutspokenData){142, (Byte *)data.bytes, 20, 119, 215, 192};
        screenSurroundEvent = [self StringFromOutspokenData:&value];
    }
    return screenSurroundEvent;
}

//: teamgonggao_
+ (NSString *)appPreciselyName {
    /* static */ NSString *appPreciselyName = nil;
    if (!appPreciselyName) {
		NSArray<NSNumber *> *origin = @[@157, @140, @136, @132, @142, @134, @135, @142, @142, @136, @134, @182, @198];
		NSData *data = [OutspokenData OutspokenDataToData:origin];
        StructOutspokenData value = (StructOutspokenData){233, (Byte *)data.bytes, 12, 126, 180, 187};
        appPreciselyName = [self StringFromOutspokenData:&value];
    }
    return appPreciselyName;
}

//: teamgonggao_record_
+ (NSString *)stylePositiveWayPage {
    /* static */ NSString *stylePositiveWayPage = nil;
    if (!stylePositiveWayPage) {
		NSArray<NSNumber *> *origin = @[@88, @73, @77, @65, @75, @67, @66, @75, @75, @77, @67, @115, @94, @73, @79, @67, @94, @72, @115, @129];
		NSData *data = [OutspokenData OutspokenDataToData:origin];
        StructOutspokenData value = (StructOutspokenData){44, (Byte *)data.bytes, 19, 219, 2, 165};
        stylePositiveWayPage = [self StringFromOutspokenData:&value];
    }
    return stylePositiveWayPage;
}

//: teamgonggao_title_
+ (NSString *)kOverWarningMessage {
    /* static */ NSString *kOverWarningMessage = nil;
    if (!kOverWarningMessage) {
		NSArray<NSNumber *> *origin = @[@28, @13, @9, @5, @15, @7, @6, @15, @15, @9, @7, @55, @28, @1, @28, @4, @13, @55, @191];
		NSData *data = [OutspokenData OutspokenDataToData:origin];
        StructOutspokenData value = (StructOutspokenData){104, (Byte *)data.bytes, 18, 218, 164, 96};
        kOverWarningMessage = [self StringFromOutspokenData:&value];
    }
    return kOverWarningMessage;
}

//: Audio
+ (NSString *)screenGiAlert {
    /* static */ NSString *screenGiAlert = nil;
    if (!screenGiAlert) {
		NSArray<NSNumber *> *origin = @[@109, @89, @72, @69, @67, @189];
		NSData *data = [OutspokenData OutspokenDataToData:origin];
        StructOutspokenData value = (StructOutspokenData){44, (Byte *)data.bytes, 5, 21, 191, 175};
        screenGiAlert = [self StringFromOutspokenData:&value];
    }
    return screenGiAlert;
}

+ (NSData *)OutspokenDataToData:(NSArray<NSNumber *> *)value {
    NSMutableArray<NSNumber *> *array = [NSMutableArray arrayWithArray:value];
    NSInteger length = array.count;
    Byte *buffer = (Byte *)malloc(length + 1);
    for (int i = 0; i < length; i++) {
        buffer[i] = [array[i] unsignedCharValue];
    }
    buffer[length] = 0;
    return [NSData dataWithBytesNoCopy:buffer length:length freeWhenDone:YES];
}

//: title
+ (NSString *)viewSoftwareError {
    /* static */ NSString *viewSoftwareError = nil;
    if (!viewSoftwareError) {
		NSArray<NSNumber *> *origin = @[@225, @252, @225, @249, @240, @212];
		NSData *data = [OutspokenData OutspokenDataToData:origin];
        StructOutspokenData value = (StructOutspokenData){149, (Byte *)data.bytes, 5, 70, 208, 113};
        viewSoftwareError = [self StringFromOutspokenData:&value];
    }
    return viewSoftwareError;
}

//: File
+ (NSString *)themeAmenMinimumInsightText {
    /* static */ NSString *themeAmenMinimumInsightText = nil;
    if (!themeAmenMinimumInsightText) {
		NSArray<NSNumber *> *origin = @[@86, @121, @124, @117, @13];
		NSData *data = [OutspokenData OutspokenDataToData:origin];
        StructOutspokenData value = (StructOutspokenData){16, (Byte *)data.bytes, 4, 128, 104, 30};
        themeAmenMinimumInsightText = [self StringFromOutspokenData:&value];
    }
    return themeAmenMinimumInsightText;
}

+ (NSString *)StringFromOutspokenData:(StructOutspokenData *)data {
    return [NSString stringWithUTF8String:(char *)[self OutspokenDataToByte:data]];
}

@end   

// __DEBUG__
// __CLOSE_PRINT__
//
//  FlashUnction.m
// Reek
//
//  Created by Netease on 2019/10/17.
//  Copyright © 2019 NetEase. All rights reserved.
//

// __M_A_C_R_O__
//: #import "ZZZMessageUtil.h"
#import "FlashUnction.h"
//: #import <NIMSDK/NIMSDK.h>
#import <NIMSDK/NIMSDK.h>
//: #import "NSString+Reek.h"
#import "NSString+Reek.h"
//: #import "ZZZKitUtil.h"
#import "PayerMinimal.h"
//: #import "AppleProjectKit.h"
#import "Reek.h"
//: #import "NSDictionary+AppleProjectKit.h"
#import "NSDictionary+Reek.h"

//: @implementation ZZZMessageUtil
@implementation FlashUnction

//: + (NSString *)messageContent:(NIMMessage*)message {
+ (NSString *)objectName:(NIMMessage*)message {
    //: NSString *text = @"";
    NSString *text = @"";
    //: switch (message.messageType) {
    switch (message.messageType) {
        //: case NIMMessageTypeText:
        case NIMMessageTypeText:
            //: text = message.text;
            text = message.text;
            //: break;
            break;
        //: case NIMMessageTypeAudio:
        case NIMMessageTypeAudio:
            //: text = [NTESLanguageManager getTextWithKey:@"Audio"]; 
            text = [CarefulRage formatExtend:[OutspokenData screenGiAlert]]; //@"[语音]".string_localized;
            //: break;
            break;
        //: case NIMMessageTypeImage:
        case NIMMessageTypeImage:
            //: text = [NTESLanguageManager getTextWithKey:@"Image"];
            text = [CarefulRage formatExtend:[OutspokenData k_yieldHelper]];//@"[图片]".string_localized;
            //: break;
            break;
        //: case NIMMessageTypeVideo:
        case NIMMessageTypeVideo:
            //: text = [NTESLanguageManager getTextWithKey:@"Video"];
            text = [CarefulRage formatExtend:[OutspokenData themeFacilityData]];//@"[视频]".string_localized;
            //: break;
            break;
        //: case NIMMessageTypeLocation:
        case NIMMessageTypeLocation:
            //: text = [NTESLanguageManager getTextWithKey:@"Location"];
            text = [CarefulRage formatExtend:[OutspokenData styleSapValue]];//@"[位置]".string_localized;
            //: break;
            break;
        //: case NIMMessageTypeNotification:{
        case NIMMessageTypeNotification:{
            //: return [self notificationMessageContent:message];
            return [self rootBank:message];
        }
        //: case NIMMessageTypeFile:
        case NIMMessageTypeFile:
            //: text = [NTESLanguageManager getTextWithKey:@"File"];
            text = [CarefulRage formatExtend:[OutspokenData themeAmenMinimumInsightText]];//@"[文件]".string_localized;
            //: break;
            break;
        //: case NIMMessageTypeTip:
        case NIMMessageTypeTip:
            //: text = message.text;
            text = message.text;
            //: break;
            break;
        //: case NIMMessageTypeRtcCallRecord: {
        case NIMMessageTypeRtcCallRecord: {
            //: NIMRtcCallRecordObject *record = message.messageObject;
            NIMRtcCallRecordObject *record = message.messageObject;
            //: return (record.callType == NIMRtcCallTypeAudio ? [NTESLanguageManager getTextWithKey:@"Internet_call"] : [NTESLanguageManager getTextWithKey:@"Video_chat"]);
            return (record.callType == NIMRtcCallTypeAudio ? [CarefulRage formatExtend:[OutspokenData styleContemplateOverPage]] : [CarefulRage formatExtend:[OutspokenData coreIqTideDistributeEvent]]);
//            return (record.callType == NIMRtcCallTypeAudio ? @"[网络通话]" : @"[视频聊天]").string_localized;
        }
        //: default:
        default:
            //: text = @"";
            text = @"";//@"[未知消息]".string_localized;
    }
    //: return text;
    return text;
}

//: + (NSString *)notificationMessageContent:(NIMMessage *)message{
+ (NSString *)rootBank:(NIMMessage *)message{
    //: NIMNotificationObject *object = message.messageObject;
    NIMNotificationObject *object = message.messageObject;
    //: if (object.notificationType == NIMNotificationTypeNetCall) {
    if (object.notificationType == NIMNotificationTypeNetCall) {
        //: NIMNetCallNotificationContent *content = (NIMNetCallNotificationContent *)object.content;
        NIMNetCallNotificationContent *content = (NIMNetCallNotificationContent *)object.content;
        //: if (content.callType == NIMNetCallTypeAudio) {
        if (content.callType == NIMNetCallTypeAudio) {
            //: return [NTESLanguageManager getTextWithKey:@"Internet_call"];
            return [CarefulRage formatExtend:[OutspokenData styleContemplateOverPage]];//@"[网络通话]".string_localized;
        }
        //: return [NTESLanguageManager getTextWithKey:@"Video_chat"];
        return [CarefulRage formatExtend:[OutspokenData coreIqTideDistributeEvent]];//@"[视频聊天]".string_localized;
    }
    //: if (object.notificationType == NIMNotificationTypeTeam) {
    if (object.notificationType == NIMNotificationTypeTeam) {
        //: NIMTeam *team = [[NIMSDK sharedSDK].teamManager teamById:message.session.sessionId];
        NIMTeam *team = [[NIMSDK sharedSDK].teamManager teamById:message.session.sessionId];
        //: if (team.type == NIMTeamTypeNormal) {
        if (team.type == NIMTeamTypeNormal) {
            //: return [NTESLanguageManager getTextWithKey:@"Group_chat_information_update"];
            return [CarefulRage formatExtend:[OutspokenData featureDentSettings]];//@"[讨论组信息更新]".string_localized;
        //: }else{
        }else{

            //: NSString * flag=nil;
            NSString * flag=nil;
            //: NSString * title=nil;
            NSString * title=nil;
            //: NIMTeamNotificationContent *content = (NIMTeamNotificationContent*)object.content;
            NIMTeamNotificationContent *content = (NIMTeamNotificationContent*)object.content;
            //: switch (content.operationType) {
            switch (content.operationType) {
                    //: case NIMTeamOperationTypeUpdate:
                    case NIMTeamOperationTypeUpdate:

                        //: if ([[content attachment] isKindOfClass:[NIMUpdateTeamInfoAttachment class]]) {
                        if ([[content attachment] isKindOfClass:[NIMUpdateTeamInfoAttachment class]]) {
                            //: NIMUpdateTeamInfoAttachment *teamAttachment = (NIMUpdateTeamInfoAttachment *)[content attachment];
                            NIMUpdateTeamInfoAttachment *teamAttachment = (NIMUpdateTeamInfoAttachment *)[content attachment];
                            //: if ([teamAttachment.values count] == 1) {
                            if ([teamAttachment.values count] == 1) {
                                //: NIMTeamUpdateTag tag = [[[teamAttachment.values allKeys] firstObject] integerValue];
                                NIMTeamUpdateTag tag = [[[teamAttachment.values allKeys] firstObject] integerValue];
                                //: switch (tag) {
                                switch (tag) {
                                    //: case NIMTeamUpdateTagAnouncement:
                                    case NIMTeamUpdateTagAnouncement:
                                    {
                                        //: title=[[[teamAttachment.values allValues] firstObject] lowercaseString];
                                        title=[[[teamAttachment.values allValues] firstObject] lowercaseString];
                                        //: NSData* data = [title dataUsingEncoding:NSUTF8StringEncoding];
                                        NSData* data = [title dataUsingEncoding:NSUTF8StringEncoding];
                                        //: NSArray *datas = [NSJSONSerialization JSONObjectWithData:data options:0 error:nil];
                                        NSArray *datas = [NSJSONSerialization JSONObjectWithData:data options:0 error:nil];
                                        //: if([datas count]==0){
                                        if([datas count]==0){
                                            //: break;
                                            break;
                                        }
                                        //: title=[datas lastObject][@"title"];
                                        title=[datas lastObject][[OutspokenData viewSoftwareError]];
                                        //: content=[datas lastObject][@"content"];
                                        content=[datas lastObject][[OutspokenData moduleManHelper]];

                                       //记录群公告标志
                                        //记录messageid
                                        //: flag = [[NSUserDefaults standardUserDefaults] valueForKey:[[NSString alloc]initWithFormat:@"%@%@",@"teamgonggao_record_",message.messageId]];
                                        flag = [[NSUserDefaults standardUserDefaults] valueForKey:[[NSString alloc]initWithFormat:@"%@%@",[OutspokenData stylePositiveWayPage],message.messageId]];
                                        //: if(flag.length==0){
                                        if(flag.length==0){
                                            //: [[NSUserDefaults standardUserDefaults] setValue:@"1" forKey:[[NSString alloc]initWithFormat:@"%@%@",@"teamgonggao_record_",message.messageId]];
                                            [[NSUserDefaults standardUserDefaults] setValue:@"1" forKey:[[NSString alloc]initWithFormat:@"%@%@",[OutspokenData stylePositiveWayPage],message.messageId]];
                                            //: [[NSUserDefaults standardUserDefaults] setValue:@"1" forKey:[[NSString alloc]initWithFormat:@"%@%@",@"teamgonggao_",message.session.sessionId]];
                                            [[NSUserDefaults standardUserDefaults] setValue:@"1" forKey:[[NSString alloc]initWithFormat:@"%@%@",[OutspokenData appPreciselyName],message.session.sessionId]];
                                            //记录标题和内容
                                            //: [[NSUserDefaults standardUserDefaults] setValue:title forKey:[[NSString alloc] initWithFormat:@"%@%@",@"teamgonggao_title_",message.session.sessionId]];
                                            [[NSUserDefaults standardUserDefaults] setValue:title forKey:[[NSString alloc] initWithFormat:@"%@%@",[OutspokenData kOverWarningMessage],message.session.sessionId]];
                                            //: [[NSUserDefaults standardUserDefaults] setValue:content forKey:[[NSString alloc] initWithFormat:@"%@%@",@"teamgonggao_content_",message.session.sessionId]];
                                            [[NSUserDefaults standardUserDefaults] setValue:content forKey:[[NSString alloc] initWithFormat:@"%@%@",[OutspokenData screenSurroundEvent],message.session.sessionId]];
                                        }

                                    }
                                        //: break;
                                        break;

                                    //: default:
                                    default:
                                        //: break;
                                        break;
                                }
                            }
                        }

                        //: break;
                        break;
                    //: default:
                    default:
                        //: break;
                        break;
            }

            //: return [NTESLanguageManager getTextWithKey:@"Group_information_update"];
            return [CarefulRage formatExtend:[OutspokenData commonHmData]];//@"[群信息更新]".string_localized;
        }
    }

    //: if (object.notificationType == NIMNotificationTypeSuperTeam) {
    if (object.notificationType == NIMNotificationTypeSuperTeam) {
        //: return [NTESLanguageManager getTextWithKey:@"Super_Group_Information_Update"];
        return [CarefulRage formatExtend:[OutspokenData commonLiteReceiveTimer]];//@"[超大群信息更新]".string_localized;
    }
    //: return @"";
    return @"";//@"[未知消息]".string_localized;LangKey(@"Unknown_message")
}

//: @end
@end
